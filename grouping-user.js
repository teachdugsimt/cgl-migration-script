const data = {
  '+66123131312': [
    {
      id: 130,
      role_id: 4,
    },
  ],
  '+66195392222': [
    {
      id: 213,
      role_id: 3,
    },
  ],
  '+66234567891': [
    {
      id: 264,
      role_id: 4,
    },
  ],
  '+66258963147': [
    {
      id: 157,
      role_id: 4,
    },
  ],
  '+66295392222': [
    {
      id: 200,
      role_id: 4,
    },
  ],
  '+66333560966': [
    {
      id: 390,
      role_id: 2,
    },
  ],
  '+66456789012': [
    {
      id: 263,
      role_id: 4,
    },
  ],
  '+66492512582': [
    {
      id: 180,
      role_id: 3,
    },
  ],
  '+66611789666': [
    {
      id: 340,
      role_id: 3,
    },
  ],
  '+66616789666': [
    {
      id: 371,
      role_id: 2,
    },
    {
      id: 371,
      role_id: 3,
    },
  ],
  '+66617158208': [
    {
      id: 100,
      role_id: 4,
    },
    {
      id: 106,
      role_id: 3,
    },
  ],
  '+66623428765': [
    {
      id: 154,
      role_id: 2,
    },
  ],
  '+66634103555': [
    {
      id: 260,
      role_id: 4,
    },
    {
      id: 258,
      role_id: 3,
    },
  ],
  '+66650522525': [
    {
      id: 376,
      role_id: 2,
    },
    {
      id: 376,
      role_id: 3,
    },
  ],
  '+66653796823': [
    {
      id: 372,
      role_id: 2,
    },
    {
      id: 372,
      role_id: 3,
    },
  ],
  '+66655214050': [
    {
      id: 482,
      role_id: 2,
    },
    {
      id: 482,
      role_id: 3,
    },
  ],
  '+66805575655': [
    {
      id: 188,
      role_id: 4,
    },
    {
      id: 227,
      role_id: 4,
    },
    {
      id: 247,
      role_id: 4,
    },
    {
      id: 282,
      role_id: 3,
    },
  ],
  '+66805594035': [
    {
      id: 191,
      role_id: 4,
    },
  ],
  '+66807568180': [
    {
      id: 467,
      role_id: 3,
    },
    {
      id: 469,
      role_id: 2,
    },
    {
      id: 468,
      role_id: 4,
    },
  ],
  '+66815424946': [
    {
      id: 218,
      role_id: 3,
    },
  ],
  '+66815500002': [
    {
      id: 429,
      role_id: 2,
    },
    {
      id: 429,
      role_id: 3,
    },
  ],
  '+66815545454': [
    {
      id: 219,
      role_id: 4,
    },
  ],
  '+66819196267': [
    {
      id: 293,
      role_id: 3,
    },
  ],
  '+66820089712': [
    {
      id: 484,
      role_id: 3,
    },
    {
      id: 484,
      role_id: 2,
    },
  ],
  '+66821067681': [
    {
      id: 325,
      role_id: 3,
    },
    {
      id: 295,
      role_id: 4,
    },
    {
      id: 349,
      role_id: 4,
    },
    {
      id: 325,
      role_id: 2,
    },
  ],
  '+66825391593': [
    {
      id: 367,
      role_id: 4,
    },
    {
      id: 351,
      role_id: 3,
    },
    {
      id: 354,
      role_id: 4,
    },
    {
      id: 351,
      role_id: 2,
    },
  ],
  '+66829789429': [
    {
      id: 99,
      role_id: 3,
    },
  ],
  '+66829879429': [
    {
      id: 189,
      role_id: 4,
    },
  ],
  '+66831977788': [
    {
      id: 373,
      role_id: 2,
    },
    {
      id: 373,
      role_id: 3,
    },
  ],
  '+66839869503': [
    {
      id: 370,
      role_id: 2,
    },
    {
      id: 370,
      role_id: 3,
    },
  ],
  '+66842653197': [
    {
      id: 159,
      role_id: 4,
    },
  ],
  '+66843818811': [
    {
      id: 438,
      role_id: 2,
    },
    {
      id: 438,
      role_id: 3,
    },
  ],
  '+66851238927': [
    {
      id: 350,
      role_id: 2,
    },
    {
      id: 359,
      role_id: 4,
    },
    {
      id: 353,
      role_id: 4,
    },
    {
      id: 350,
      role_id: 3,
    },
  ],
  '+66851238928': [
    {
      id: 357,
      role_id: 3,
    },
  ],
  '+66853823629': [
    {
      id: 152,
      role_id: 3,
    },
  ],
  '+66854805996': [
    {
      id: 369,
      role_id: 3,
    },
    {
      id: 369,
      role_id: 2,
    },
  ],
  '+66861110674': [
    {
      id: 330,
      role_id: 4,
    },
    {
      id: 329,
      role_id: 3,
    },
  ],
  '+66863655738': [
    {
      id: 374,
      role_id: 3,
    },
    {
      id: 374,
      role_id: 2,
    },
  ],
  '+6686553765': [
    {
      id: 472,
      role_id: 4,
    },
  ],
  '+66868666310': [
    {
      id: 196,
      role_id: 4,
    },
  ],
  '+66871554263': [
    {
      id: 314,
      role_id: 2,
    },
    {
      id: 314,
      role_id: 3,
    },
  ],
  '+66884029323': [
    {
      id: 439,
      role_id: 3,
    },
    {
      id: 439,
      role_id: 2,
    },
  ],
  '+66891782569': [
    {
      id: 98,
      role_id: 4,
    },
  ],
  '+66897337851': [
    {
      id: 153,
      role_id: 2,
    },
  ],
  '+66899649429': [
    {
      id: 97,
      role_id: 3,
    },
  ],
  '+66899699501': [
    {
      id: 377,
      role_id: 2,
    },
    {
      id: 387,
      role_id: 4,
    },
    {
      id: 377,
      role_id: 3,
    },
  ],
  '+66906083201': [
    {
      id: 454,
      role_id: 2,
    },
  ],
  '+66906083205': [
    {
      id: 451,
      role_id: 2,
    },
  ],
  '+66906083206': [
    {
      id: 452,
      role_id: 2,
    },
  ],
  '+66906083207': [
    {
      id: 453,
      role_id: 2,
    },
  ],
  '+66906083208': [
    {
      id: 459,
      role_id: 2,
    },
  ],
  '+66906083287': [
    {
      id: 311,
      role_id: 3,
    },
    {
      id: 344,
      role_id: 4,
    },
    {
      id: 311,
      role_id: 2,
    },
  ],
  '+66906083288': [
    {
      id: 364,
      role_id: 3,
    },
  ],
  '+66906083301': [
    {
      id: 475,
      role_id: 2,
    },
  ],
  '+66906083308': [
    {
      id: 474,
      role_id: 2,
    },
  ],
  '+66909678306': [
    {
      id: 151,
      role_id: 2,
    },
  ],
  '+66914289545': [
    {
      id: 361,
      role_id: 2,
    },
    {
      id: 361,
      role_id: 3,
    },
  ],
  '+66914289546': [
    {
      id: 360,
      role_id: 4,
    },
  ],
  '+66915255454': [
    {
      id: 217,
      role_id: 3,
    },
  ],
  '+66915392222': [
    {
      id: 304,
      role_id: 3,
    },
    {
      id: 304,
      role_id: 2,
    },
    {
      id: 347,
      role_id: 4,
    },
  ],
  '+66917346218': [
    {
      id: 336,
      role_id: 4,
    },
  ],
  '+66922584320': [
    {
      id: 155,
      role_id: 3,
    },
  ],
  '+66924128883': [
    {
      id: 366,
      role_id: 3,
    },
  ],
  '+66942512582': [
    {
      id: 324,
      role_id: 4,
    },
  ],
  '+66949549160': [
    {
      id: 41,
      role_id: 3,
    },
  ],
  '+66955392222': [
    {
      id: 216,
      role_id: 4,
    },
  ],
  '+66958604508': [
    {
      id: 156,
      role_id: 3,
    },
  ],
  '+66964260152': [
    {
      id: 37,
      role_id: 3,
    },
    {
      id: 81,
      role_id: 3,
    },
    {
      id: 14,
      role_id: 2,
    },
  ],
  '+66964269040': [
    {
      id: 82,
      role_id: 3,
    },
    {
      id: 105,
      role_id: 4,
    },
  ],
  '+66964797631': [
    {
      id: 464,
      role_id: 3,
    },
    {
      id: 464,
      role_id: 2,
    },
  ],
  '+66964797632': [
    {
      id: 380,
      role_id: 4,
    },
    {
      id: 435,
      role_id: 2,
    },
    {
      id: 378,
      role_id: 3,
    },
  ],
  '+66964873647': [
    {
      id: 445,
      role_id: 4,
    },
  ],
  '+66970976236': [
    {
      id: 382,
      role_id: 2,
    },
    {
      id: 382,
      role_id: 3,
    },
    {
      id: 383,
      role_id: 4,
    },
  ],
  '+66976876576': [
    {
      id: 397,
      role_id: 2,
    },
    {
      id: 397,
      role_id: 3,
    },
  ],
  '+66978377389': [
    {
      id: 202,
      role_id: 4,
    },
    {
      id: 476,
      role_id: 3,
    },
  ],
  '+66982562060': [
    {
      id: 343,
      role_id: 2,
    },
    {
      id: 345,
      role_id: 4,
    },
    {
      id: 346,
      role_id: 4,
    },
    {
      id: 343,
      role_id: 3,
    },
  ],
  '+66982723142': [
    {
      id: 409,
      role_id: 4,
    },
  ],
  '+66983974528': [
    {
      id: 7,
      role_id: 3,
    },
  ],
  '+66983974529': [
    {
      id: 5,
      role_id: 2,
    },
  ],
  '+66987654577': [
    {
      id: 175,
      role_id: 4,
    },
  ],
  '+66987654656': [
    {
      id: 165,
      role_id: 4,
    },
  ],
  '+66987657655': [
    {
      id: 164,
      role_id: 4,
    },
  ],
  '+66987727236': [
    {
      id: 123,
      role_id: 4,
    },
    {
      id: 118,
      role_id: 4,
    },
  ],
  '+66987727237': [
    {
      id: 119,
      role_id: 4,
    },
  ],
  '+66987727238': [
    {
      id: 120,
      role_id: 4,
    },
  ],
  '+66987727239': [
    {
      id: 121,
      role_id: 4,
    },
  ],
  '+66987819978': [
    {
      id: 356,
      role_id: 4,
    },
    {
      id: 355,
      role_id: 3,
    },
    {
      id: 368,
      role_id: 2,
    },
  ],
  '+66987878676': [
    {
      id: 178,
      role_id: 4,
    },
  ],
  '+66988829770': [
    {
      id: 483,
      role_id: 2,
    },
    {
      id: 483,
      role_id: 3,
    },
  ],
  '+66988848032': [
    {
      id: 229,
      role_id: 3,
    },
    {
      id: 230,
      role_id: 4,
    },
  ],
  '+66989200526': [
    {
      id: 211,
      role_id: 3,
    },
    {
      id: 322,
      role_id: 4,
    },
    {
      id: 326,
      role_id: 4,
    },
    {
      id: 226,
      role_id: 2,
    },
    {
      id: 450,
      role_id: 4,
    },
  ],
  '+66989464249': [
    {
      id: 375,
      role_id: 3,
    },
    {
      id: 375,
      role_id: 2,
    },
  ],
  '+66995613196': [
    {
      id: 15,
      role_id: 2,
    },
    {
      id: 16,
      role_id: 2,
    },
  ],
  '+66999222888': [
    {
      id: 158,
      role_id: 4,
    },
  ],
};

let result = [];

for (const key in data) {
  const dataWithKey = data[key];
  if (dataWithKey.length > 1) {
    let obj = {};
    for (const attr of dataWithKey) {
      if (attr.role_id === 2) {
        obj.shipper = attr;
      } else if (attr.role_id === 3) {
        obj.carrier = attr;
      } else {
        obj.other = attr;
      }
    }

    if (obj.carrier) {
      result.push({
        id: obj.carrier.id,
        username: key,
      });
    } else if (obj.shipper) {
      result.push({
        id: obj.shipper.id,
        username: key,
      });
    } else {
      result.push({
        id: obj.other.id,
        username: key,
      });
    }
  } else {
    result.push({
      id: dataWithKey[0].id,
      username: key,
    });
  }
}

console.log('JSON.stringify(result) :>> ', JSON.stringify(result));
